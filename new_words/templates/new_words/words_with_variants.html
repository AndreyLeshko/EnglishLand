{% extends 'base/base.html' %}
{% load static %}
{% load random_numbers %}


{% block title %}
    Тренировка
{% endblock title %}

{% block css_links %}
     <link rel="stylesheet" href="{% static 'new_words/css/words_with_variants.css' %}?n={% random_int %}">
{% endblock css_links %}

{% block page_content %}
    <div class="standart-container">

        {% if empty == 1 %}
            <p>У вас нет слов на изучении</p>
            <p class="blue-link"><a href="{% url 'words:add_words_to_train' %}">Добавить слова на изучение?</a></p>
        {% else %}

            <div>
                <input type="hidden" name="translate" id="translate" value="{{ translate }}">
                <p class="word">{{ word|capfirst }}</p>

                <div class="variants">
                    {% for var in variants %}
                        <div class="variant">
                            {{ var }}
                        </div>
                    {% endfor %}
                </div>
                <a class="next-btn" href="{% url 'words:words_with_variants' mode='user_words' how_translate='en-ru' %}">Дальше</a>


                <script>
                    const var_list = document.querySelectorAll('.variant')
                    const true_answer = document.querySelector('#translate').value

                    function show_answer() {
                        if (this.textContent.trim() === true_answer) {
                            this.style.backgroundColor = 'rgba(0, 255, 0, 0.6)'
                        } else {
                            this.style.backgroundColor = 'rgba(255, 0, 0, 0.5)'
                        }
                    }
                    
                    var_list.forEach(
                        function (el) {
                            el.addEventListener('click', show_answer)
                        }
                    )

                </script>
            </div>

        {% endif %}
    </div>
{% endblock page_content %}
